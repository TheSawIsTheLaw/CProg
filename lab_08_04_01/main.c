/**
 * \file main.—Å
 * \brief –õ–∞–±–æ—Ä–∞–±–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–æ–º–µ—Ä 8.
 * –í–∞—Ä–∏–∞–Ω—Ç 4.
 * –ó–∞–¥–∞–Ω–∏–µ: –ü—Ä–∏–Ω—è—Ç—å —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —Ü–µ–ª–æ–µ ùëõ –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
 * ùëõ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª, –∫–æ—Ç–æ—Ä—ã–µ —Å–ª–µ–¥—É–µ—Ç –∑–∞–ø–∏—Å–∞—Ç—å –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∏–≤ ùê¥.
 * –í—ã—á–∏—Å–ª–∏—Ç—å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –≤–∞—Ä–∏–∞–Ω—Ç–æ–º —á–∏—Å–ª–æ ùúá1 = ùúá1(ùê¥).
 * –ü–æ–ª—É—á–∏—Ç—å –º–∞—Å—Å–∏–≤ ùê¥1, —É–¥–∞–ª–∏–≤ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –≤–∞—Ä–∏–∞–Ω—Ç–æ–º –∏–∑ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ
 * –º–∞—Å—Å–∏–≤–∞ ùê¥ –Ω–∞–±–æ—Ä —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ –ø—Ä–∏–∑–Ω–∞–∫—É. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–∞
 * —ç—Ç–æ–º —à–∞–≥–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–∂–µ –≤—ã—á–∏—Å–ª–µ–Ω–Ω–æ–µ ùúá1, —Ç–æ –æ–Ω–æ –Ω–µ
 * –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ. –ï—Å–ª–∏ –º–∞—Å—Å–∏–≤ ùê¥1 —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ, –∏–ª–∏ –æ–Ω
 * —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –ø—É—Å—Ç—ã–º, —Å—á–∏—Ç–∞—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ–π.
 * –í—ã—á–∏—Å–ª–∏—Ç—å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –≤–∞—Ä–∏–∞–Ω—Ç–æ–º —á–∏—Å–ª–æ ùúá2 = ùúá2(ùê¥1).
 * –ü–æ–ª—É—á–∏–≤ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –Ω–æ–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ ùëù, —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Å–∏–≤ ùê¥2, –≤—Å—Ç–∞–≤–∏–≤
 * —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø–æ—Ä—è–¥–∫–∞ —Å–Ω–∞—á–∞–ª–∞ –Ω–∞ –ø–æ–∑–∏—Ü–∏—é ùëù –º–∞—Å—Å–∏–≤–∞ ùê¥1, –∞ –∑–∞—Ç–µ–º –¥–æ–±–∞–≤–∏–≤
 * –≤ –Ω–∞—á–∞–ª–æ –∏ –≤ –∫–æ–Ω–µ—Ü —á–∏—Å–ª–æ ùúá2. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–∞ —ç—Ç–æ–º —à–∞–≥–µ
 * –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ —É–∂–µ –≤—ã—á–∏—Å–ª–µ–Ω–Ω–æ–µ ùúá2, —Ç–æ –æ–Ω–æ –Ω–µ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ.
 * –ï—Å–ª–∏ –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—Å—Ç–∞–≤–∫–∏ –Ω–∞ –ø–æ–∑–∏—Ü–∏—é ùëù –≤ –º–∞—Å—Å–∏–≤–µ –º–µ–Ω—å—à–µ, —á–µ–º ùëù + 1 —ç–ª–µ–º–µ–Ω—Ç–æ–≤,
 * —Å—á–∏—Ç–∞—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ–π.
 * –†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω –º–∞—Å—Å–∏–≤ ùê¥2.
 *
 * –î–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ 4 —á–∏—Å–ª–æ ùúá1 –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ —Å—Ä–µ–¥–Ω–µ–≥–æ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ
 * –≤–∑–≤–µ—à–µ–Ω–Ω–æ–≥–æ (—Å—é–¥–∞ –º–Ω–µ —ç—Ç–æ –Ω–µ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏, —Ö–æ—Ç—å —É–±–µ–π—Ç–µ) –∏ —É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ
 * —ç–ª–µ–º–µ–Ω—Ç—ã, –º–æ–¥—É–ª—å –∫–æ—Ç–æ—Ä—ã—Ö –±–æ–ª—å—à–µ ùúá1.
 * –ß–∏—Å–ª–æ ùúá2 = sum(len(x) - 1, i = 0)(x(i)/len(x))
 */

#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include "Headers/invitation.h"
#include "Headers/calc_u1.h"
#include "Headers/calc_u2.h"
#include "Headers/del.h"
#include "Headers/insert.h"
#include "Headers/print.h"

/**
 * \def SUCCESS
 * \brief –ö–æ–¥ —É–¥–∞—á–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º—ã –∏–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã
 */
#define SUCCESS 0
/**
 * \def QUANTITY_ERROR
 * \brief –ö–æ–¥ –æ—à–∏–±–∫–∏ –≤ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–µ invitation_len_mas_pos
 */
#define QUANTITY_ERROR 1
/**
 * \def EDM_REALLOC_ERROR
 * \brief –ö–æ–¥ –æ—à–∏–±–∫–∏ –≤ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–µ expand_dyn_mas
 */
#define EDM_REALLOC_ERROR 2
/**
 * \def READ_ARRAY_ERROR
 * \brief –ö–æ–¥ –æ—à–∏–±–∫–∏ –≤ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–µ expand_dyn_mas
 */
#define READ_ARRAY_ERROR 3
/**
 * \def POS_ERROR
 * \brief –ö–æ–¥ –æ—à–∏–±–∫–∏ –≤ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–µ invitation_len_mas_pos
 */
#define POS_ERROR 4
/**
 * \def EDM_DATA_ERROR
 * \brief –ö–æ–¥ –æ—à–∏–±–∫–∏ –≤ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–µ invitation_len_mas_pos
 */
#define EDM_DATA_ERROR 5
/**
 * \def C_U1_DATA_ERROR
 * \brief –ö–æ–¥ –æ—à–∏–±–∫–∏ –≤ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–µ calc_u1
 */
#define C_U1_DATA_ERROR 6
/**
 * \def C_U2_DATA_ERROR
 * \brief –ö–æ–¥ –æ—à–∏–±–∫–∏ –≤ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–µ calc_u2
 */
#define C_U2_DATA_ERROR 7
/**
 * \def DFMUN_DATA_ERROR
 * \brief –ö–æ–¥ –æ—à–∏–±–∫–∏ –≤ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–µ del_from_mas_upmod_num
 */
#define DFMUN_DATA_ERROR 8
/**
 * \def DFMUN_QUANTITY_OUT_ERROR
 * \brief –ö–æ–¥ –æ—à–∏–±–∫–∏ –≤ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–µ del_from_mas_upmod_num
 */
#define DFMUN_QUANTITY_OUT_ERROR 9
/**
 * \def DFMUN_REALLOC_ERROR
 * \brief –ö–æ–¥ –æ—à–∏–±–∫–∏ –≤ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–µ del_from_mas_upmod_num
 */
#define DFMUN_REALLOC_ERROR 10
/**
 * \def IIMBPSE_DATA_ERROR
 * \brief –ö–æ–¥ –æ—à–∏–±–∫–∏ –≤ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–µ insert_in_mas_by_pos_start_end
 */
#define IIMBPSE_DATA_ERROR 11
/**
 * \def IIMBPSE_REALLOC_ERROR
 * \brief –ö–æ–¥ –æ—à–∏–±–∫–∏ –≤ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–µ insert_in_mas_by_pos_start_end
 */
#define IIMBPSE_REALLOC_ERROR 12
/**
 * \def PDA_DATA_ERROR
 * \brief –ö–æ–¥ –æ—à–∏–±–∫–∏ –≤ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–µ print_double_array
 */
#define PDA_DATA_ERROR 13

/**
 * \fn int main()
 * \brief –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É
 *
 * \return –ö–æ–¥ –æ—à–∏–±–∫–∏ (–æ—Ç–ª–∏—á–Ω–æ–µ –æ—Ç –Ω—É–ª—è —á–∏—Å–ª–æ) –∏–ª–∏
 * —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (–Ω—É–ª—å)
 */
int main(void)
{
    /* –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–ª–µ–Ω–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ, —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –º–∞—Å—Å–∏–≤ –∏ –ø–æ–∑–∏—Ü–∏—è,
    —Å –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–ª–µ–µ */
    short check;

    int quantity, pos;

    double *mas;

    // –ü—Ä–∏–Ω–∏–º–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è
    check = invitation_len_mas_pos(&quantity, &mas, &pos);

    if (check)
    {
        free(mas);
        return check;
    }

    double u1;
    check = calc_u1(quantity, mas, &u1);
    if (check)
    {
        free(mas);
        return check;
    }

    check = del_from_mas_upmod_num(&mas, &quantity, u1);

    double u2;
    check = calc_u2(quantity, mas, &u2);
    if (check)
    {
        free(mas);
        return check;
    }

    check = insert_in_mas_by_pos_start_end(&mas, &quantity, pos, u2);
    if (check)
    {
        free(mas);
        return check;
    }

    check = print_double_array(mas, quantity);

    if (check)
    {
        free(mas);
        return check;
    }

    free(mas);

    return SUCCESS;
}
